<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test de Personalidad Eneagrama</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- SweetAlert2 para notificaciones modernas -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Firebase SDK (Compat) para que funcione con firebase.* en codigo_corregido.js -->
    <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore-compat.js"></script>
    <script>
      // Configuraci√≥n de Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyCLmi5HJGf6315vLanXPr2qBop3nRKGU2A",
        authDomain: "disceneagram.firebaseapp.com",
        projectId: "disceneagram",
        storageBucket: "disceneagram.firebasestorage.app",
        messagingSenderId: "60369634677",
        appId: "1:60369634677:web:426accb73d1e29f821bf3c",
        measurementId: "G-RVGF7HRDF6",
      };

      // Inicializar Firebase (compat)
      if (!firebase.apps || !firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
      // Analytics es opcional en compat
      if (firebase.analytics) {
        firebase.analytics();
      }
    </script>
  </head>
  <body>
    <!-- Efecto de part√≠culas en el fondo -->
    <div id="particles-background"></div>
    <div id="eneagram-test-wrapper">
      <div class="container">
        <!-- Pantalla inicial moderna -->
        <div id="start-test-container" class="hero-section">
          <div class="hero-content">
            <div class="eneagram-icon">
              <svg viewBox="0 0 100 100" class="eneagram-svg">
                <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="2"/>
                <circle cx="50" cy="50" r="3" fill="currentColor"/>
                <line x1="50" y1="5" x2="50" y2="95" stroke="currentColor" stroke-width="1"/>
                <line x1="5" y1="50" x2="95" y2="50" stroke="currentColor" stroke-width="1"/>
                <line x1="20" y1="20" x2="80" y2="80" stroke="currentColor" stroke-width="1"/>
                <line x1="80" y1="20" x2="20" y2="80" stroke="currentColor" stroke-width="1"/>
                <circle cx="50" cy="10" r="4" fill="currentColor"/>
                <circle cx="50" cy="90" r="4" fill="currentColor"/>
                <circle cx="10" cy="50" r="4" fill="currentColor"/>
                <circle cx="90" cy="50" r="4" fill="currentColor"/>
                <circle cx="25" cy="25" r="4" fill="currentColor"/>
                <circle cx="75" cy="75" r="4" fill="currentColor"/>
                <circle cx="75" cy="25" r="4" fill="currentColor"/>
                <circle cx="25" cy="75" r="4" fill="currentColor"/>
              </svg>
            </div>
            <h1 class="hero-title">Descubre tu Personalidad</h1>
            <p class="hero-subtitle">Test de Eneagrama 2025</p>
            <p class="intro-text">
              El Eneagrama es un sistema que describe nueve tipos de personalidad
              distintos y sus interrelaciones. Este test te ayudar√° a descubrir tu
              tipo de personalidad predominante seg√∫n el Eneagrama.
            </p>
            <div class="instructions">
              <h3>Instrucciones:</h3>
              <p>Responde cada pregunta usando la escala del 1 al 5:</p>
              <div class="scale-example">
                <span class="scale-item">1 - Muy poco identificado</span>
                <span class="scale-item">5 - Totalmente identificado</span>
              </div>
            </div>
            <!-- Modo de selecci√≥n oculto - siempre usa test completo -->
            <div class="test-options" style="display: none;">
              <div class="mode-selector">
                <label class="mode-option">
                  <input type="radio" name="test-mode" value="prueba">
                  <span class="mode-label">
                    <span class="mode-title">Modo Prueba</span>
                    <span class="mode-description">5 preguntas r√°pidas</span>
                  </span>
                </label>
                <label class="mode-option">
                  <input type="radio" name="test-mode" value="completo" checked>
                  <span class="mode-label">
                    <span class="mode-title">Test Completo</span>
                    <span class="mode-description">180 preguntas detalladas</span>
                  </span>
                </label>
              </div>
            </div>
            
            <button id="start-test-btn" class="cta-button">
              <span>Empezar Test Completo</span>
              <svg class="button-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Formulario de email y t√©rminos (oculto inicialmente) -->
        <div id="email-form-container" class="email-form-section" style="display: none;">
          <div class="form-card">
            <h2 id="email-form-title">Para ver tus resultados</h2>
            <p id="email-form-description" class="form-description">Necesitamos tu email para enviarte un an√°lisis personalizado de tu personalidad.</p>
            
            <div id="email-form">
              <div class="input-group">
                <label for="user-email">Email: <span class="required-asterisk">*</span></label>
                <input
                  type="email"
                  id="user-email"
                  name="user-email"
                  placeholder="tu@email.com"
                />
              </div>
              
              <div class="checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="consentimiento-checkbox" />
                  <span class="checkmark"></span>
                  Acepto los
                  <a 
                    href="https://ulpik.com/wp-content/uploads/2025/09/Ulpik-Terminos-y-Condiciones-2025.-1.pdf" 
                    target="_blank"
                    rel="noopener noreferrer"
                  >t√©rminos y condiciones</a>
                  y el uso de mis datos para este test. <span class="required-asterisk">*</span>
                </label>
              </div>
              
              <div class="checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="promociones-checkbox" />
                  <span class="checkmark"></span>
                  Al hacer clic, autorizo recibir correos y promociones. <span class="required-asterisk">*</span>
                </label>
              </div>
              
              <div id="privacy-note" class="privacy-note">
                <em>
                  Este test es personalizado para ti. Usamos tu correo solo para
                  identificarte y mejorar tu experiencia. No compartimos tus
                  datos.
                </em>
              </div>
              
              <div id="form-error-message" class="form-error-message" style="display: none;">
                <span class="error-icon">‚ö†Ô∏è</span>
                <span class="error-text"></span>
              </div>
              
              <div class="form-buttons">
                <button type="button" id="submit-email-btn" class="submit-button">
                  Ver Mis Resultados
                </button>
                <button type="button" id="cancel-email-btn" class="cancel-button">
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        </div>

        <div
          id="user-email-display"
          style="
            display: none;
            font-size: 1.05em;
            color: #1a237e;
            margin-bottom: 10px;
          "
        ></div>

        <div id="alert-message" class="alert" style="display: none"></div>

        <form id="quiz-form" style="display: none">
          <div id="quiz-container">
            <!-- Las preguntas de la p√°gina actual se generar√°n aqu√≠ -->
          </div>

          <div id="pagination-controls" style="display: none">
            <!-- Los botones Anterior/Siguiente se a√±adir√°n aqu√≠ por JS -->
          </div>

          <button type="submit" id="submit-btn">Calcular Resultados</button>
        </form>
        <div id="loading-spinner" style="display: none; text-align: center">
          <p>Calculando resultados...</p>
          <div
            class="spinner"
            style="
              border: 4px solid #ccc;
              border-top: 4px solid #3498db;
              border-radius: 50%;
              width: 30px;
              height: 30px;
              animation: spin 1s linear infinite;
              margin: auto;
            "
          ></div>
        </div>
        <div id="results-container" style="display: none">
          <h2>Tus Resultados</h2>
          <div id="results-text"></div>
          <div id="results-chart-container">
            <canvas id="results-chart"></canvas>
          </div>
          <div id="type-descriptions" class="type-descriptions">
            <h3>Descripci√≥n de los Tipos</h3>
            <div class="type-description" id="type-1">
              <h4>üíé Tipo 1 ‚Äì El Perfeccionista</h4>
              <p>
                Eres una persona √≠ntegra, √©tica y confiable. Tienes un fuerte
                deseo de mejorar el mundo y hacerlo m√°s justo. Tu disciplina y
                sentido del deber te hacen destacar como alguien en quien
                siempre se puede confiar. Inspiras con tu ejemplo y tu
                compromiso con lo correcto. ¬°Qu√© orgullo ser alguien que act√∫a
                con tanta coherencia!
              </p>
            </div>
            <div class="type-description" id="type-2">
              <h4>üíñ Tipo 2 ‚Äì El Ayudador</h4>
              <p>
                Eres una persona c√°lida, generosa y profundamente emp√°tica.
                Siempre est√°s atento a las necesidades de los dem√°s, dispuesto a
                brindar amor y apoyo sin pedir nada a cambio. Tu capacidad de
                entrega crea v√≠nculos genuinos y duraderos. Haces que las
                personas se sientan vistas y valoradas. ¬°Qu√© hermoso es tener un
                coraz√≥n tan grande como el tuyo!
              </p>
            </div>
            <div class="type-description" id="type-3">
              <h4>üèÜ Tipo 3 ‚Äì El Triunfador</h4>
              <p>
                Eres una persona ambiciosa, determinada y llena de energ√≠a.
                Tienes una habilidad natural para alcanzar tus metas y motivar a
                otros a hacer lo mismo. Te destacas por tu enfoque, tu pasi√≥n y
                tu capacidad de liderar con el ejemplo. Siempre buscas dar lo
                mejor de ti en todo lo que haces. ¬°Ser t√∫ es inspirar √©xito con
                autenticidad!
              </p>
            </div>
            <div class="type-description" id="type-4">
              <h4>üé® Tipo 4 ‚Äì El Individualista</h4>
              <p>
                Eres sensible, profundo y aut√©ntico, con una conexi√≥n muy
                especial con tus emociones. Tu forma de ver el mundo es √∫nica y
                art√≠stica, llena de belleza y significado. Tienes el don de
                expresar lo que muchos sienten pero no saben c√≥mo decir. Valoras
                lo verdadero, lo √≠ntimo y lo esencial. ¬°Qu√© maravilloso es ser
                t√∫, tan lleno de alma y creatividad!
              </p>
            </div>
            <div class="type-description" id="type-5">
              <h4>üîç Tipo 5 ‚Äì El Investigador</h4>
              <p>
                Eres una mente brillante, curiosa y observadora. Disfrutas
                descubrir, entender y explorar el mundo desde la profundidad del
                pensamiento. Encuentras sabidur√≠a en el silencio y valoras tu
                espacio interior como un tesoro. Tu serenidad intelectual es
                admirable. ¬°Ser t√∫ es ver m√°s all√° de lo evidente y enriquecer a
                los dem√°s con tus ideas!
              </p>
            </div>
            <div class="type-description" id="type-6">
              <h4>üõ°Ô∏è Tipo 6 ‚Äì El Leal</h4>
              <p>
                Eres confiable, protector y profundamente comprometido. Siempre
                est√°s pensando en c√≥mo cuidar a los tuyos y mantener la
                estabilidad en tu entorno. Tu sentido del deber y tu fidelidad
                son pilares para quienes te rodean. Das seguridad con tu
                presencia y responsabilidad. ¬°Ser t√∫ es ser una roca firme en un
                mundo cambiante!
              </p>
            </div>
            <div class="type-description" id="type-7">
              <h4>üåà Tipo 7 ‚Äì El Entusiasta</h4>
              <p>
                Eres alegr√≠a pura, creatividad en movimiento y amante de la
                vida. Siempre est√°s buscando nuevas experiencias que te hagan
                sentir libre y feliz. Tu entusiasmo es contagioso y tu energ√≠a
                ilumina cualquier lugar. Sabes c√≥mo transformar lo cotidiano en
                aventura. ¬°Ser t√∫ es un recordatorio de que la vida se hizo para
                disfrutarla!
              </p>
            </div>
            <div class="type-description" id="type-8">
              <h4>üî• Tipo 8 ‚Äì El Desafiador</h4>
              <p>
                Eres fuerte, directo y valiente. Tienes un gran sentido de
                justicia y no temes enfrentar lo que sea necesario para defender
                a quienes amas. Lideras con pasi√≥n, firmeza y autenticidad. Tu
                poder interior inspira respeto y seguridad. ¬°Ser t√∫ es ser una
                fuerza que transforma y protege al mismo tiempo!
              </p>
            </div>
            <div class="type-description" id="type-9">
              <h4>üåø Tipo 9 ‚Äì El Pacificador</h4>
              <p>
                Eres paz, armon√≠a y equilibrio. Tienes el don de unir personas,
                calmar tensiones y hacer que todos se sientan bienvenidos. Tu
                presencia serena transforma los ambientes con solo estar ah√≠.
                Escuchas con el coraz√≥n y act√∫as con sabidur√≠a silenciosa. ¬°Ser
                t√∫ es regalar al mundo un respiro de tranquilidad!
              </p>
            </div>
          </div>
          <div class="restart-container">
            <button id="restart-test-btn">Reiniciar Test</button>
          </div>
        </div>

        <footer>
          <p>¬© 2025 Test de Eneagrama - Todos los derechos reservados</p>
        </footer>
      </div>
    </div>

    <script src="codigo_corregido.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  </body>
</html>
