<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test de Personalidad Eneagrama</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- SweetAlert2 para notificaciones modernas -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Firebase SDK (Compat) para que funcione con firebase.* en codigo_corregido.js -->
    <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore-compat.js"></script>
    <script>
      // Configuración de Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyCLmi5HJGf6315vLanXPr2qBop3nRKGU2A",
        authDomain: "disceneagram.firebaseapp.com",
        projectId: "disceneagram",
        storageBucket: "disceneagram.firebasestorage.app",
        messagingSenderId: "60369634677",
        appId: "1:60369634677:web:426accb73d1e29f821bf3c",
        measurementId: "G-RVGF7HRDF6",
      };

      // Inicializar Firebase (compat)
      if (!firebase.apps || !firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
      // Analytics es opcional en compat
      if (firebase.analytics) {
        firebase.analytics();
      }
    </script>
  </head>
  <body>
    <!-- Efecto de partículas en el fondo -->
    <div id="particles-background"></div>
    <div id="eneagram-test-wrapper">
      <div class="container">
        <!-- Pantalla inicial moderna -->
        <div id="start-test-container" class="hero-section">
          <div class="hero-content">
            <div class="eneagram-icon">
              <img src="media/icon_enea.png" alt="Eneagrama" class="eneagram-img">
            </div>
            <h1 class="hero-title">Descubre tu motivación</h1>
            <p class="hero-subtitle">Test de Eneagrama 2025</p>
            <p class="intro-text">
              El eneagrama es un sistema que te ayuda a conocer tus motivaciones mas profundas. Este es un test de autoconocimiento.
            </p>
            <div class="instructions">
              <h3>Instrucciones</h3>
              <p>Responde cada pregunta usando la escala del 1 al 5:</p>
              <div class="scale-example">
                <div class="scale-circle">
                  <div class="scale-number">1</div>
                  <div class="scale-label">
                    <span>Nada</span>
                    <span>identificado</span>
                  </div>
                </div>
                <div class="scale-arrow">→</div>
                <div class="scale-circle">
                  <div class="scale-number">5</div>
                  <div class="scale-label">
                    <span>Muy</span>
                    <span>identificado</span>
                  </div>
                </div>
              </div>
              <p class="scale-instruction">Elige la opción que mejor describa tu respuesta.</p>
            </div>
            <!-- Modo de selección oculto - siempre usa test completo -->
            <div class="test-options" style="display: none;">
              <div class="mode-selector">
                <label class="mode-option">
                  <input type="radio" name="test-mode" value="prueba">
                  <span class="mode-label">
                    <span class="mode-title">Modo Prueba</span>
                    <span class="mode-description">5 preguntas rápidas</span>
                  </span>
                </label>
                <label class="mode-option">
                  <input type="radio" name="test-mode" value="completo" checked>
                  <span class="mode-label">
                    <span class="mode-title">Test Completo</span>
                    <span class="mode-description">180 preguntas detalladas</span>
                  </span>
                </label>
              </div>
            </div>
            
            <div class="test-time-info">
              <div class="time-badge">
                <svg class="time-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12,6 12,12 16,14"/>
                </svg>
                <span>Tiempo aproximado: 30 min</span>
              </div>
            </div>
            
            <button id="start-test-btn" class="cta-button">
              <span>Comenzar Test</span>
            </button>
          </div>
        </div>

        <!-- Formulario de email y términos (oculto inicialmente) -->
        <div id="email-form-container" class="email-form-section" style="display: none;">
          <div class="form-card">
            <h2 id="email-form-title">Para ver tus resultados</h2>
            <p id="email-form-description" class="form-description">Necesitamos tu email para enviarte un análisis personalizado de tu personalidad.</p>
            
            <div id="email-form">
              <div class="input-group">
                <label for="user-email">Email: <span class="required-asterisk">*</span></label>
                <input
                  type="email"
                  id="user-email"
                  name="user-email"
                  placeholder="tu@email.com"
                />
              </div>
              
              <div class="checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="consentimiento-checkbox" />
                  <span class="checkmark"></span>
                  Acepto los
                  <a 
                    href="https://ulpik.com/wp-content/uploads/2025/09/Ulpik-Terminos-y-Condiciones-2025.-1.pdf" 
                    target="_blank"
                    rel="noopener noreferrer"
                  >términos y condiciones</a>
                  y el uso de mis datos para este test. <span class="required-asterisk">*</span>
                </label>
              </div>
              
              <div class="checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="promociones-checkbox" />
                  <span class="checkmark"></span>
                  Al hacer clic, autorizo recibir correos y promociones. <span class="required-asterisk">*</span>
                </label>
              </div>
              
              <div id="privacy-note" class="privacy-note">
                <em>
                  Este test es personalizado para ti. Usamos tu correo solo para
                  identificarte y mejorar tu experiencia. No compartimos tus
                  datos.
                </em>
              </div>
              
              <div id="form-error-message" class="form-error-message" style="display: none;">
                <span class="error-icon">⚠️</span>
                <span class="error-text"></span>
              </div>
              
              <div class="form-buttons">
                <button type="button" id="submit-email-btn" class="submit-button">
                  Ver Mis Resultados
                </button>
                <button type="button" id="cancel-email-btn" class="cancel-button">
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        </div>

        <div
          id="user-email-display"
          style="
            display: none;
            font-size: 1.05em;
            color: #1a237e;
            margin-bottom: 10px;
          "
        ></div>

        <div id="alert-message" class="alert" style="display: none"></div>

        <form id="quiz-form" style="display: none">
          <div id="quiz-container">
            <!-- Las preguntas de la página actual se generarán aquí -->
          </div>

          <div id="pagination-controls" style="display: none">
            <!-- Los botones Anterior/Siguiente se añadirán aquí por JS -->
          </div>

          <button type="submit" id="submit-btn">Calcular Resultados</button>
        </form>
        <div id="loading-spinner" class="loading-overlay" style="display: none;">
          <div class="loading-container">
            <div class="loading-spinner">
              <div class="spinner-ring"></div>
              <div class="spinner-ring"></div>
              <div class="spinner-ring"></div>
            </div>
            <h3 class="loading-title">Analizando tus respuestas</h3>
            <p class="loading-message">Estamos calculando tu tipo de personalidad...</p>
            <div class="loading-progress">
              <div class="progress-bar"></div>
            </div>
          </div>
        </div>
        <div id="results-container" style="display: none">
          
          <div id="results-text"></div>
          <div id="type-descriptions" class="type-descriptions">
            <h3>Descripción de los Tipos de Motivación</h3>
            <div class="type-description" id="type-1">
              <h4 style="color: #667eea;">⚖️ Tipo 1 – El Perfeccionista</h4>
              <div class="type-details">
                <div class="type-motive">
                  <strong>Motivación Principal:</strong> Ser bueno, íntegro y correcto
                </div>
                <div class="type-fear">
                  <strong>Miedo Principal:</strong> Ser corrupto, defectuoso o malo
                </div>
                <p class="type-description-text">
                  Eres una persona íntegra, ética y confiable. Tienes un fuerte
                  deseo de mejorar el mundo y hacerlo más justo. Tu disciplina y
                  sentido del deber te hacen destacar como alguien en quien
                  siempre se puede confiar. Inspiras con tu ejemplo y tu
                  compromiso con lo correcto.
                </p>
                <div class="type-strengths">
                  <strong>Fortalezas:</strong> Integridad, responsabilidad, disciplina, sentido de justicia
                </div>
                <div class="type-challenges">
                  <strong>Desafíos:</strong> Perfeccionismo excesivo, crítica hacia ti mismo y otros
                </div>
                <div class="type-growth">
                  <strong>Crecimiento:</strong> Practica la autocompasión y acepta que la perfección no existe
                </div>
              </div>
            </div>
            <div class="type-description" id="type-2">
              <h4 style="color: #f093fb;">💖 Tipo 2 – El Ayudador</h4>
              <p>
                Eres una persona cálida, generosa y profundamente empática.
                Siempre estás atento a las necesidades de los demás, dispuesto a
                brindar amor y apoyo sin pedir nada a cambio. Tu capacidad de
                entrega crea vínculos genuinos y duraderos. Haces que las
                personas se sientan vistas y valoradas. ¡Qué hermoso es tener un
                corazón tan grande como el tuyo!
              </p>
            </div>
            <div class="type-description" id="type-3">
              <h4 style="color: #4facfe;">🏆 Tipo 3 – El Triunfador</h4>
              <p>
                Eres una persona ambiciosa, determinada y llena de energía.
                Tienes una habilidad natural para alcanzar tus metas y motivar a
                otros a hacer lo mismo. Te destacas por tu enfoque, tu pasión y
                tu capacidad de liderar con el ejemplo. Siempre buscas dar lo
                mejor de ti en todo lo que haces. ¡Ser tú es inspirar éxito con
                autenticidad!
              </p>
            </div>
            <div class="type-description" id="type-4">
              <h4 style="color: #764ba2;">🎨 Tipo 4 – El Individualista</h4>
              <p>
                Eres sensible, profundo y auténtico, con una conexión muy
                especial con tus emociones. Tu forma de ver el mundo es única y
                artística, llena de belleza y significado. Tienes el don de
                expresar lo que muchos sienten pero no saben cómo decir. Valoras
                lo verdadero, lo íntimo y lo esencial. ¡Qué maravilloso es ser
                tú, tan lleno de alma y creatividad!
              </p>
            </div>
            <div class="type-description" id="type-5">
              <h4 style="color: #43e97b;">🔍 Tipo 5 – El Investigador</h4>
              <p>
                Eres una mente brillante, curiosa y observadora. Disfrutas
                descubrir, entender y explorar el mundo desde la profundidad del
                pensamiento. Encuentras sabiduría en el silencio y valoras tu
                espacio interior como un tesoro. Tu serenidad intelectual es
                admirable. ¡Ser tú es ver más allá de lo evidente y enriquecer a
                los demás con tus ideas!
              </p>
            </div>
            <div class="type-description" id="type-6">
              <h4 style="color: #fa709a;">🛡️ Tipo 6 – El Leal</h4>
              <p>
                Eres confiable, protector y profundamente comprometido. Siempre
                estás pensando en cómo cuidar a los tuyos y mantener la
                estabilidad en tu entorno. Tu sentido del deber y tu fidelidad
                son pilares para quienes te rodean. Das seguridad con tu
                presencia y responsabilidad. ¡Ser tú es ser una roca firme en un
                mundo cambiante!
              </p>
            </div>
            <div class="type-description" id="type-7">
              <h4 style="color: #fee140;">🌈 Tipo 7 – El Entusiasta</h4>
              <p>
                Eres alegría pura, creatividad en movimiento y amante de la
                vida. Siempre estás buscando nuevas experiencias que te hagan
                sentir libre y feliz. Tu entusiasmo es contagioso y tu energía
                ilumina cualquier lugar. Sabes cómo transformar lo cotidiano en
                aventura. ¡Ser tú es un recordatorio de que la vida se hizo para
                disfrutarla!
              </p>
            </div>
            <div class="type-description" id="type-8">
              <h4 style="color: #ff6b6b;">🔥 Tipo 8 – El Desafiador</h4>
              <p>
                Eres fuerte, directo y valiente. Tienes un gran sentido de
                justicia y no temes enfrentar lo que sea necesario para defender
                a quienes amas. Lideras con pasión, firmeza y autenticidad. Tu
                poder interior inspira respeto y seguridad. ¡Ser tú es ser una
                fuerza que transforma y protege al mismo tiempo!
              </p>
            </div>
            <div class="type-description" id="type-9">
              <h4 style="color: #a8edea;">🌿 Tipo 9 – El Pacificador</h4>
              <p>
                Eres paz, armonía y equilibrio. Tienes el don de unir personas,
                calmar tensiones y hacer que todos se sientan bienvenidos. Tu
                presencia serena transforma los ambientes con solo estar ahí.
                Escuchas con el corazón y actúas con sabiduría silenciosa. ¡Ser
                tú es regalar al mundo un respiro de tranquilidad!
              </p>
            </div>
          </div>
          <div class="restart-container">
            <button id="restart-test-btn">Reiniciar Test</button>
          </div>
        </div>

        <footer>
          <div class="footer-content">
            <p>© 2025 Test de Eneagrama · IK SAS · Todos los derechos reservados.</p>
            <div class="footer-logo">
              <span class="developed-by">Desarrollado por</span>
              <svg class="company-logo" viewBox="0 0 11.81 2.94" xmlns="http://www.w3.org/2000/svg">
                <defs>
                  <style>
                    .cls-1 {
                      fill: #667eea;
                      stroke-width: 0px;
                    }
                  </style>
                </defs>
                <circle class="cls-1" cx="1.63" cy=".33" r=".33"></circle>
                <circle class="cls-1" cx=".65" cy=".33" r=".33"></circle>
                <circle class="cls-1" cx="2.61" cy=".33" r=".33"></circle>
                <path class="cls-1" d="M3.22.94c-.02-.07-.08-.13-.16-.13h-.94c-.09,0-.16.07-.16.16v.98c0,.18-.15.33-.33.33s-.33-.15-.33-.33v-.98c0-.09-.07-.16-.16-.16H.2c-.08,0-.14.05-.16.13h0c-.03.12-.04.24-.04.36,0,.9.73,1.63,1.63,1.63s1.63-.73,1.63-1.63c0-.12-.01-.24-.04-.36"></path>
                <path class="cls-1" d="M4.98.82h.68v1.63h-.68v-.12l.02-.17h0c-.11.22-.3.33-.55.33-.38,0-.61-.19-.61-.67V.82h.68v.94c0,.17.07.26.22.26.18,0,.26-.14.26-.31v-.88Z"></path>
                <path class="cls-1" d="M5.94,2.45V.34h.68v2.1h-.68Z"></path>
                <path class="cls-1" d="M8.75,1.6v.08c0,.53-.21.82-.64.82-.23,0-.43-.1-.53-.32h0v.18s.01.58.01.58h-.68V.82h.68v.26s0,0,0,0c.1-.21.31-.32.53-.32.44,0,.64.29.64.83ZM8.07,1.54c0-.16-.06-.3-.24-.3s-.25.12-.25.29v.2c0,.17.06.29.25.29s.24-.14.24-.31v-.17Z"></path>
                <path class="cls-1" d="M8.93.41c0-.18.12-.26.38-.26s.38.08.38.26-.11.26-.38.26-.38-.08-.38-.26ZM8.97,2.45V.82h.68v1.63h-.68Z"></path>
                <path class="cls-1" d="M9.93,2.45V.34h.68v1.02h.16l.24-.55h.74l-.4.79.46.85h-.76l-.28-.62h-.16v.62h-.68Z"></path>
              </svg>
            </div>
          </div>
        </footer>
      </div>
    </div>

    <script src="codigo_corregido.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  </body>
</html>
